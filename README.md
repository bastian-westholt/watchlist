# Watchlist

```
â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•
â–ˆâ–ˆâ•‘ â–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
â•šâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
 â•šâ•â•â•â•šâ•â•â• â•šâ•â•  â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•šâ•â•â•â•â•â•â•   â•šâ•â•
```

Eine moderne, production-ready Flask-Webanwendung zum Verwalten deiner persÃ¶nlichen Film-Watchlists mit vollstÃ¤ndigem Error Handling und Security Features.

## ğŸ¯ Ãœber das Projekt

Watchlist ist eine professionelle Web-App mit:
- **Multi-User Support** - Jeder User hat seine eigene Watchlist
- **OMDB API Integration** - Automatisches Abrufen von Film-Metadaten
- **Comprehensive Error Handling** - Alle API & Database Errors werden sauber gehandhabt
- **Authorization System** - User kÃ¶nnen nur ihre eigenen Movies bearbeiten/lÃ¶schen
- **Modern Dark-Mode Design** - Minimalistisches, responsive UI
- **PEP8-Konform** - Professionell dokumentierter, sauberer Code

## âœ¨ Features

### Core Features
- âœ… **Multi-User Management** - Mehrere User mit separaten Watchlists
- âœ… **OMDB Integration** - Automatische Film-Daten (Poster, Director, Jahr)
- âœ… **CRUD Operations** - Erstellen, Lesen, Bearbeiten, LÃ¶schen von Filmen
- âœ… **Dark Mode Design** - Modernes UI mit Emerald Green Accents
- âœ… **Responsive Layout** - Desktop & Mobile optimiert

### Security & Error Handling
- ğŸ”’ **Authorization** - Ownership-basierte Zugriffskontrolle
- âš ï¸ **Error Handling** - Comprehensive Exception Handling fÃ¼r:
  - OMDB API Errors (Timeout, Connection, Invalid Response)
  - Database Errors (NoResultFound, IntegrityError)
  - User Input Validation
- ğŸ›¡ï¸ **Security** - Protection gegen unauthorized Movie manipulation
- ğŸ“„ **Custom Error Pages** - 404 & 500 Error Pages im Design

### Code Quality
- ğŸ“ **PEP8-Konform** - Alle Python Files formatiert & dokumentiert
- ğŸ“– **Docstrings** - VollstÃ¤ndige Dokumentation aller Funktionen/Klassen
- ğŸ§ª **Error Recovery** - Automatisches `db.session.rollback()` bei Fehlern

## ğŸ› ï¸ Tech Stack

**Backend:**
- Python 3.13
- Flask 3.1.0 (Web Framework)
- Flask-SQLAlchemy 3.1.1 (ORM)
- SQLite (Database)
- python-dotenv 1.1.1 (Environment Variables)
- requests 2.32.5 (HTTP Client)

**Frontend:**
- HTML5 + Jinja2 Templates
- CSS3 (Custom Design System mit CSS Variables)
- Google Fonts (BBH Bartle, Jersey 20)

**External APIs:**
- OMDB API (http://www.omdbapi.com/)

## ğŸ“¦ Installation

### Voraussetzungen
- Python 3.13 oder hÃ¶her
- pip (Python Package Manager)
- OMDB API Key (kostenlos)

### Setup

1. **Repository klonen**
   ```bash
   git clone <your-repo-url>
   cd watchlist
   ```

2. **Virtual Environment erstellen**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate  # Linux/macOS
   # oder
   .venv\Scripts\activate  # Windows
   ```

3. **Dependencies installieren**
   ```bash
   pip install -r requirements.txt
   ```

4. **OMDB API Key einrichten**
   - Gehe zu [omdbapi.com](http://www.omdbapi.com/apikey.aspx)
   - Registriere dich fÃ¼r einen kostenlosen API Key
   - Erstelle eine `.env` Datei im Projektordner:
     ```env
     OMDB_API_KEY=your_api_key_here
     ```

5. **App starten**
   ```bash
   python app.py
   ```

6. **Browser Ã¶ffnen**
   ```
   http://localhost:5002
   ```

Die Datenbank wird automatisch beim ersten Start erstellt!

## ğŸš€ Usage

### User erstellen
1. Gehe zur Homepage (`/`)
2. Scrolle zu "ADD NEW USER"
3. Gib einen Namen ein und klicke auf "ADD USER"

### Filme hinzufÃ¼gen
1. Klicke auf "VIEW MOVIES" bei einem User
2. Scrolle zu "ADD MOVIE"
3. Gib den Filmtitel ein (z.B. "Inception")
4. Die App holt automatisch alle Infos von OMDB!

### Filme bearbeiten/lÃ¶schen
- **Update:** Ã„ndere den Titel im Input-Feld und klicke "Update"
- **Delete:** Klicke auf "Delete" (mit BestÃ¤tigungs-Dialog)

**Security:** User kÃ¶nnen nur ihre eigenen Movies bearbeiten/lÃ¶schen!

## ğŸ“ Projektstruktur

```
watchlist/
â”œâ”€â”€ app.py                      # Flask Application & Routes
â”œâ”€â”€ models.py                   # SQLAlchemy Database Models
â”œâ”€â”€ data_manager.py             # Business Logic & Error Handling
â”œâ”€â”€ requirements.txt            # Python Dependencies
â”œâ”€â”€ .env                        # Environment Variables (API Key)
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ CLAUDE.md              # Project Documentation
â”‚   â””â”€â”€ ERROR_HANDLING_PLAN.md # Error Handling Implementation
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html              # Base Template (Layout)
â”‚   â”œâ”€â”€ home.html              # Homepage (User List)
â”‚   â”œâ”€â”€ movies.html            # Movie List Page
â”‚   â”œâ”€â”€ 404.html               # Custom 404 Error Page
â”‚   â””â”€â”€ 500.html               # Custom 500 Error Page
â”œâ”€â”€ static/
â”‚   â””â”€â”€ style.css              # Custom Design System
â””â”€â”€ data/
    â””â”€â”€ watchlist.db           # SQLite Database (auto-generated)
```

## ğŸ¨ Design Features

### Color Palette
- **Background:** `#0a0a0a` (Deep Black)
- **Surface:** `#151515` / `#1a1a1a` (Dark Gray)
- **Accent:** `#10b981` (Emerald Green)
- **Text:** `#e5e5e5` (Light Gray)
- **Error:** `#ef4444` (Red) / `#fb7185` (Pink)

### CSS Features
- **Design System** - CSS Variables fÃ¼r konsistente Styling
- **Smooth Animations** - Transitions & Hover-Effekte
- **Responsive Breakpoints** - Mobile-optimiert ab 768px
- **Alert System** - Success (TÃ¼rkis) & Error (Rosa) Alerts

## ğŸ”’ Security & Error Handling

### Authorization
- **Ownership Check:** User kÃ¶nnen nur ihre eigenen Movies bearbeiten/lÃ¶schen
- **Permission Errors:** "You do not have permission" Messages bei unauthorized Access
- **User Validation:** User Existence Check bei allen Movie Operations

### Error Handling
**OMDB API:**
- `Timeout` â†’ "Request timed out"
- `ConnectionError` â†’ "Connection error. Check your internet."
- `RequestException` â†’ "Failed to fetch movie data"
- `ValueError` â†’ "Invalid data from OMDB"

**Database:**
- `NoResultFound` â†’ "Movie not found"
- Generic `Exception` â†’ Automatic `db.session.rollback()` + Error Message

**Custom Error Pages:**
- `404 Not Found` â†’ Styled 404.html Page
- `500 Internal Server Error` â†’ Styled 500.html Page mit Rollback

### Input Validation
- Empty title checks
- User existence verification
- OMDB response validation (Director, Year fields)
- Poster "N/A" handling

## ğŸ“Š Database Schema

### User Model
```python
- id (Integer, Primary Key, Auto-Increment)
- name (String(100), Not Null)
```

### Movie Model
```python
- id (Integer, Primary Key, Auto-Increment)
- title (String(100), Not Null)
- director (String(100), Not Null)
- year (Integer, Not Null)
- poster_url (String(200), Nullable)
- user_id (Integer, Foreign Key â†’ users.id, Not Null)
```

**Relationship:** One-to-Many (1 User â†’ Many Movies)

## ğŸ§ª Testing

### Manual Test Cases
- âœ… Add Movie: "Inception" â†’ Success
- âœ… Add Movie: "xyz123gibberish" â†’ "Movie not found" Error
- âœ… Disconnect Internet â†’ "Connection error" Alert
- âœ… Timeout Test (>5s) â†’ "Request timed out" Alert
- âœ… Update Movie (as owner) â†’ Success
- âœ… Update Movie (not owner) â†’ "Permission denied" Error
- âœ… Delete Movie (as owner) â†’ Success
- âœ… Delete Movie (not owner) â†’ "Permission denied" Error
- âœ… Invalid Movie ID â†’ "Movie not found" Error
- âœ… 404 Route â†’ Custom 404 Page
- âœ… Database Error â†’ Custom 500 Page + Rollback

## ğŸ“ API Reference

### Routes

| Method | Route | Description |
|--------|-------|-------------|
| `GET` | `/` | Homepage - List all users |
| `POST` | `/users` | Create new user |
| `GET` | `/users/<user_id>/movies` | Get user's movies |
| `POST` | `/users/<user_id>/movies` | Add movie via OMDB |
| `POST` | `/users/<user_id>/movies/<movie_id>/update` | Update movie (with auth) |
| `POST` | `/users/<user_id>/movies/<movie_id>/delete` | Delete movie (with auth) |

### Query Parameters
- `?success=True` - Show success alert
- `?update=True` - Show update alert
- `?delete=True` - Show delete alert
- `?error=<message>` - Show error alert with message

## ğŸ”§ Configuration

### Environment Variables (.env)
```env
OMDB_API_KEY=your_api_key_here
```

### Flask Config (app.py)
```python
SQLALCHEMY_DATABASE_URI = "sqlite:///data/watchlist.db"
SQLALCHEMY_TRACK_MODIFICATIONS = False
DEBUG = True  # Development only
HOST = "0.0.0.0"
PORT = 5002
```

## ğŸ› Known Issues

- âš ï¸ Keine User-Authentifizierung (URL-basierter Access)
- âš ï¸ OMDB API Free Tier: 1000 Requests/Tag Limit
- ğŸŸ¡ TV-Serien Year Parsing (En-Dash vs Bindestrich) â†’ Year = 0 (minor)

## ğŸ—ºï¸ Roadmap

### Planned Features
- [ ] User Authentication & Session Management
- [ ] Password Protection fÃ¼r User Accounts
- [ ] Film-Ratings System (1-5 Stars)
- [ ] Suche & Filter fÃ¼r Movies (Genre, Jahr, Director)
- [ ] Export zu CSV/PDF
- [ ] Dark/Light Mode Toggle
- [ ] Film-Empfehlungen basierend auf Watchlist
- [ ] Watchlist Sharing via Public Links
- [ ] Movie Details Modal (Plot, Actors, Runtime)
- [ ] Watched/Unwatched Status Toggle

### Code Improvements
- [ ] Unit Tests (pytest)
- [ ] Integration Tests
- [ ] API Rate Limiting
- [ ] Caching fÃ¼r OMDB Requests
- [ ] Migration zu PostgreSQL (fÃ¼r Production)
- [ ] Docker Support

## ğŸ“„ License

Dieses Projekt wurde fÃ¼r Lernzwecke erstellt.

## ğŸ™ Credits

- **OMDB API** - Open Movie Database
- **Google Fonts** - BBH Bartle & Jersey 20 Typography
- **Flask** - Web Framework by Pallets
- **SQLAlchemy** - Python SQL Toolkit & ORM
- **Claude Code** - Development Assistance

## ğŸ‘¨â€ğŸ’» Development

### Code Quality Standards
- âœ… PEP8 Compliance
- âœ… Comprehensive Docstrings
- âœ… Type Hints (where applicable)
- âœ… Error Handling Best Practices
- âœ… Security-First Design

### Contributing
Dieses Projekt ist ein Lernprojekt. Contributions sind willkommen!

---

**Made with â¤ï¸ and Python**
**Version:** 1.0.0 (Production-Ready)
**Last Updated:** 2025-12-30
